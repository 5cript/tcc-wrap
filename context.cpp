#include "context.hpp"

namespace TinyCompiler
{
//#####################################################################################################################
    Context::Context()
        : ctx_{tcc_new()}
    {
    }
//---------------------------------------------------------------------------------------------------------------------
    void Context::setRuntime(std::string const& directory)
    {
        runtime_ = directory;

        tcc_set_lib_path(ctx_, directory.c_str());
    }
//---------------------------------------------------------------------------------------------------------------------
    Context::~Context()
    {
        tcc_delete(ctx_);
    }
//---------------------------------------------------------------------------------------------------------------------
    void Context::reset()
    {
        tcc_delete(ctx_);
        ctx_ = tcc_new();

        setRuntime(runtime_);
    }
//#####################################################################################################################
}
